
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Lista de Presentes - Casa Nova</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: auto;
      padding: 20px;
      background-color: #f5f5f5;
    }
    h1 {
      text-align: center;
    }
    .present-item {
      background-color: white;
      padding: 10px;
      margin: 5px 0;
      border-radius: 5px;
      box-shadow: 0 0 3px rgba(0,0,0,0.1);
    }
    .reserved {
      color: green;
      font-weight: bold;
    }
    form {
      margin-top: 20px;
      background: #fff;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0 0 3px rgba(0,0,0,0.1);
    }
    input, select {
      width: 100%;
      padding: 8px;
      margin: 8px 0;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    button {
      padding: 10px 15px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background-color: #218838;
    }
  </style>
</head>
<body>
  <h1>Lista de Presentes - Casa Nova</h1>

  <div id="presentes"></div>

  <form id="formPresente">
    <label for="nome">Seu nome:</label>
    <input type="text" id="nome" name="nome" required />

    <label for="presente">Escolha um presente:</label>
    <select id="presente" name="presente" required>
      <option value="">Selecione...</option>
      <option>Abajur</option>
      <option>Abridor de latas e garrafas</option>
      <option>Abridor de vinho e garrafas</option>
      <option>Afiador de facas</option>
      <option>Assadeira</option>
      <option>Batedeira</option>
      <option>Cafeteira</option>
      <option>Capacho</option>
      <option>Cesta para pães</option>
      <option>Cesto de roupas</option>
      <option>Colher de pau</option>
      <option>Concha</option>
      <option>Cortador de legumes</option>
      <option>Cortador de pizza</option>
      <option>Descascador de legumes</option>
      <option>Escorredor de macarrão</option>
      <option>Escorredor de pratos</option>
      <option>Escumadeira</option>
      <option>Espátula de silicone</option>
      <option>Espátula</option>
      <option>Espremedor de frutas</option>
      <option>Forma de bolo</option>
      <option>Forma de pizza</option>
      <option>Forma de pudim / bolo</option>
      <option>Frigideira</option>
      <option>Fruteira</option>
      <option>Galheteiro</option>
      <option>Garrafa térmica</option>
      <option>Guardanapos</option>
      <option>Jarro d'água e suco</option>
      <option>Jogo americano</option>
      <option>Jogo de copos</option>
      <option>Jogo de facas</option>
      <option>Jogo de panelas</option>
      <option>Jogo de pratos</option>
      <option>Jogo de talheres</option>
      <option>Jogo de xícaras</option>
      <option>Liquidificador</option>
      <option>Lixeira de banheiro / quarto</option>
      <option>Lixeira</option>
      <option>Manteigueira</option>
      <option>Mixer</option>
      <option>Omeleteira</option>
      <option>Panela de pressão</option>
      <option>Panificadora</option>
      <option>Panos de prato</option>
      <option>Pegador de massa</option>
      <option>Pegador de salada</option>
      <option>Peneira</option>
      <option>Pinça de cozinha</option>
      <option>Pipoqueira</option>
      <option>Porta copos</option>
      <option>Porta-condimentos e temperos</option>
      <option>Porta-facas</option>
      <option>Porta-guardanapos</option>
      <option>Pregador</option>
      <option>Puxa-sacos</option>
      <option>Quebra-nozes</option>
      <option>Queijeira</option>
      <option>Ralador</option>
      <option>Sanduicheira</option>
      <option>Suporte de detergente e esponja</option>
      <option>Tábua de corte</option>
      <option>Tábua de passar roupas</option>
      <option>Taças</option>
      <option>Tapetes</option>
      <option>Tesoura de cozinha</option>
      <option>Toalha de mesa</option>
      <option>Torradeira</option>
      <option>Travessa de vidro</option>
      <option>Varal de chão</option>
      <option>Vassoura, rodo e pá</option>
    </select>

    <button type="submit">Reservar</button>
  </form>

  <script>
    const scriptURL = "https://script.google.com/macros/s/AKfycbzYragPlyK_7FlMCqep6MQ9xuRBvjIOHSy-HlhrWKC45iahdBEQ6w4G3zoza2uoR2TI/exec";

    let reservas = [];

    const presentesDiv = document.getElementById('presentes');
    const form = document.getElementById('formPresente');
    const nomeInput = document.getElementById('nome');
    const presenteSelect = document.getElementById('presente');

    async function buscarReservas() {
      const response = await fetch(scriptURL);
      const data = await response.json();
      reservas = data;
      atualizarLista();
    }

    function atualizarLista() {
      presentesDiv.innerHTML = '';
      reservas.forEach(r => {
        const item = document.createElement('div');
        item.className = 'present-item';

        const nomePresente = document.createElement('span');
        nomePresente.className = 'reserved';
        nomePresente.innerText = `${r.presente} — reservado por ${r.nome}`;

        item.appendChild(nomePresente);
        presentesDiv.appendChild(item);
      });
    }

    async function reservarPresente(nome, presente) {
      const response = await fetch(scriptURL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: new URLSearchParams({ nome, presente })
      });
      const data = await response.json();
      if (data.result === "Sucesso!") {
        buscarReservas();
      }
    }

    form.addEventListener('submit', e => {
      e.preventDefault();
      const nome = nomeInput.value.trim();
      const presente = presenteSelect.value;

      if (reservas.some(r => r.presente === presente)) {
        alert('Esse presente já foi reservado!');
        return;
      }

      reservarPresente(nome, presente);
      nomeInput.value = '';
    });

    buscarReservas();
  </script>
</body>
</html>
